<!DOCTYPE html>
<html>
{{template "header" .}}

<body>
    <div id="app">
        <el-card class="login-box" shadow="hover">
            <div style="text-align: center;margin: 50px;font-size: 24px;text-shadow: 2px 1px #9e7676;">{{.Title}}</div>
            <el-form ref="form" :model="form" label-width="80px">
                <el-form-item label="用户名">
                    <el-input placeholder="请输入用户名" v-model="form.name"></el-input>
                </el-form-item>
                <el-form-item label="密 码">
                    <el-input type="password" placeholder="请输入密码" v-model="form.password"></el-input>
                </el-form-item>
                <el-form-item style="text-align: center;">
                    <el-button type="success" @click="onSubmit">登录</el-button>
                </el-form-item>
            </el-form>
        </el-card>
    </div>
    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    form: {
                        name: '',
                        password: ""
                    }
                }
            },
            methods: {
                onSubmit() {
                    var that = this
                    $.ajax({
                        type: "POST",
                        url: "/out/api/login",
                        dataType: "json",
                        data: JSON.stringify({ username: that.form.name, password: that.form.password }),
                        contentType: "application/json;charset=utf-8",
                        success: function (json) {
                            if (json.ok == 1) {
                                var Authorization = json.Authorization
                                $.cookie('Authorization', Authorization)
                                location.href = "/"
                            } else {
                                that.$message.error(json.msg);
                            }
                        }
                    })
                }
            }
        });
    </script>
</body>

</html>